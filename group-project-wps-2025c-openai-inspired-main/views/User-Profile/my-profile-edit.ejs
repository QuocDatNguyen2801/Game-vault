<div class="container min-vh-100 d-flex align-items-center justify-content-center py-5 my-5">
  <!-- Full Card -->
  <div class="card user-card row g-0 flex-column flex-lg-row align-items-stretch">
    <!-- User Panel: Left Side -->
    <!-- Use partials, layouts -->
      <%- include('../partials/user-panel.ejs') %>
    <!-- Profile Content: Right Side -->
    <section class="col-12 col-lg-9 panel-info h-100">
      <div class="card-body">
        <div class="d-flex flex-wrap justify-content-between align-items-center gap-3 profile-header">
          <div class="d-flex align-items-center gap-3">
            <img src="<%= avatar %>" alt="User avatar" class="user-avatar mt-4 <%= avatar === '/img/default-avatar.png' ? 'default-avatar' : '' %>" />
            <div>
              <h3 class="fw-bold mb-0"><%= username %></h3>
              <p class="text-white-50 mb-0"><%= email %></p>
            </div>
          </div>
        </div>

        <form action="/account/edit" method="post" class="row g-3 mt-4 profile-form">
          <!-- Full Name -->
          <div class="col-12 col-md-6">
            <label for="fullName" class="form-label">Full Name</label>
            <input type="text" class="form-control text-white" id="fullName" name="fullName" placeholder="Your full name" value="<%= fullName %>" />
          </div>
          <!-- Nickname -->
          <div class="col-12 col-md-6">
            <label for="nickname" class="form-label">Nickname</label>
            <input type="text" class="form-control text-white" id="nickname" name="nickname" placeholder="Your nickname" value="<%= nickname %>" />
          </div>

          <!-- Gender -->
          <div class="col-12 col-md-6">
            <label for="gender" class="form-label">Gender</label>
            <select class="form-select" id="gender" name="gender">
              <option selected disabled>Choose your gender</option>
              <% genders.forEach(function(g) { %>
                <option value="<%= g.value %>" <%= gender === g.value ? 'selected' : '' %> ><%= g.label %></option>
              <% }) %>
            </select>
          </div>

          <!-- Phone Number -->
          <div class="col-12 col-md-6">
            <label for="phoneNumber" class="form-label">Phone Number</label>
            <input type="text" class="form-control text-white" id="phoneNumber" name="phoneNumber" placeholder="Your phone number" value="<%= phoneNumber %>" />
          </div>

          <!-- Country -->
          <div class="col-12 col-md-6">
            <label for="country" class="form-label">Country</label>
            <select class="form-select" id="country" name="country">
              <option selected disabled>Choose your country</option>
              <% countries.forEach(function(c) { %>
                <option value="<%= c.code %>" <%= country === c.code ? 'selected' : '' %> ><%= c.name %></option>
              <% }) %>
            </select>
          </div>

          <!-- Language -->
          <div class="col-12 col-md-6">
            <label for="language" class="form-label">Language</label>
            <select class="form-select" id="language" name="language">
              <option selected disabled>Choose your language</option>
              <% languages.forEach(function(l) { %>
                <option value="<%= l.code %>" <%= language === l.code ? 'selected' : '' %> ><%= l.name %></option>
              <% }) %>
            </select>
          </div>
          <p class="mt-5 mb-2 fw-semibold">My email address</p>
          <div class="email-list d-flex flex-column gap-3 mt-2">
            <div class="email-card-edit">
              <div class="d-flex align-items-center gap-3">
                <i class="bi bi-envelope-fill fs-4"></i>
                <div class="email-meta d-flex flex-column">
                  <span><%= email %></span>
                  <small><%= emailTimeAgo %></small>
                </div>
              </div>
            </div>
          </div>

          <div class="error-text d-flex justify-content-center">
            <div class="d-flex flex-column align-items-center">
              <i class="bi bi-exclamation-triangle-fill fs-4"></i>
              <span>For security reasons, you cannot change your email address.</span>
            </div>
          </div>
  
          <div class="d-flex justify-content-end gap-3 mt-5">
            <a href="/account" class="text-decoration-none rounded-3 px-3 py-2 discard-btn">Discard</a>
            <button type="submit" class="text-decoration-none rounded-3 px-3 py-2 save-btn">Save</button>
          </div>
        </form>

      </div>
    </section>
  </div>
</div>