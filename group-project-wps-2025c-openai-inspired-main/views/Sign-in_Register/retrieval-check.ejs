<!-- Main Container: Full viewport height, centered content -->
<div
  class="container-fluid min-vh-100 d-flex align-items-center justify-content-center"
>
  <!-- Retrieval Card -->
  <div class="card login-card">
    <a href="/" class="icon-wrapper text-center mt-3">
      <i class="bi bi-controller controller"></i>
    </a>

    <div class="card-body mt-0 py-0">
      <!-- Header Section: Title and subtitle -->
      <div class="text-center mb-4 py-0">
        <h1 class="bold card-title mb-2 mt-0 text-white">Security Questions</h1>
        <p class="card-subtitle text-white">
          Answer your set security questions to reset your password
        </p>
      </div>
      <!-- Tab Content: Forms -->
      <div class="tab-content" id="authTabsContent">
        <!-- Retrieval Form -->
        <div class="tab-pane fade show active" id="retrieval" role="tabpanel">
          <form action="/user/signin/retrieval-check" method="post">
            <!-- Email Input -->
            <div class="mb-3">
              <label for="registeredEmail" class="form-label">Email</label>
              <div class="input-group">
                <span class="input-group-text">
                  <i class="bi bi-envelope"></i>
                </span>
                <input 
                type="email" 
                class="form-control" 
                id="registeredEmail"
                name="email" 
                placeholder="Your email"
                value="<%= typeof email !== 'undefined' ? email : '' %>" 
                required 
                <%= randomQA ? 'readonly' : '' %> />
              </div>
            </div>

            <% if (randomQA) { %>
            <!-- Question -->
            <div class="mb-3">
              <label for="question" class="form-label">Security question</label>
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  value="<%= randomQA.question %>"
                  readonly
                />
                <!-- For server -->
                <input
                  type="hidden"
                  name="question"
                  value="<%= randomQA.question %>"
                />
              </div>
            </div>
            <!-- Answer -->
            <div class="mb-5">
              <label for="answer" class="form-label">Answer</label>
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  id="answer"
                  name="answer"
                  placeholder="Your answer"
                  required
                />
              </div>
            </div>
            <% } %>

            <!-- Display error message if any -->
            <% if (typeof error !== 'undefined') { %>
            <div class="alert alert-danger error p-2" role="alert">
              <%= error %>
            </div>
            <% } %>
            <!-- Reset Password Button -->
            <button type="submit" class="btn btn-primary mb-3 w-100">
              <%= randomQA ? "Reset Password" : "Next" %>
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
