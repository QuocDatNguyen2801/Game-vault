<section
  class="blog-detail-hero"
  style="<%= post.heroStyle || '' %>"
>
  <div class="blog-detail-overlay"></div>
  <div class="container-xl position-relative">
    <nav
      class="mb-4"
      style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%23ffffff'/%3E%3C/svg%3E&#34;);"
      aria-label="breadcrumb"
    >
      <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item">
          <a href="/" class="text-decoration-none text-light">Home</a>
        </li>
        <li class="breadcrumb-item">
          <a href="/blog" class="text-decoration-none text-light">Blog</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">
          <a
            href="/blog/<%= post._id %>"
            class="text-decoration-none text-light"
            ><%= post.title %></a
          >
        </li>
      </ol>
    </nav>

    <div class="row align-items-end g-4">
      <div class="col-lg-8">
        <span class="eyebrow-pill">Feature</span>
        <h1 class="blog-detail-title">
          <%= post.title %>
        </h1>
        <div class="d-flex flex-wrap align-items-center gap-3 detail-meta">
          <div class="d-flex align-items-center gap-3">
            <img
              class="avatar"
              src="<%= post.avatar || '/img/default-avatar.png' %>"
              alt="Author avatar"
            />
            <div class="d-flex flex-column">
              <span class="fw-semibold text-white small"
                ><%= post.authorName || 'Anonymous' %></span
              >
              <span class="meta small">
                Published
                <%= new Date(post.createdAt).toLocaleDateString() %>
                · <%= post.readMins || 5 %> min read
              </span>
            </div>
          </div>
          <div class="d-flex flex-wrap gap-2 align-items-center">
            <span class="pill">Likes · <%= Array.isArray(post.likedBy) ? post.likedBy.length : (post.likes || 0) %></span>
            <span class="pill">Created · <%= new Date(post.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) %></span>
          </div>
        </div>
      </div>
      <div class="col-lg-4 text-lg-end hero-cta">
        <a href="/blog" class="btn btn-outline-light me-2">Back to blog</a>
        <a href="#article" class="btn btn-primary glow-btn">Jump to article</a>
      </div>
    </div>
  </div>
</section>

<section class="blog-detail-body" id="article">
  <div class="container-xl">
    <div class="row g-4">
      <div class="col-lg-8">
        <article class="detail-card">
          <div class="detail-card-header">
            <span class="pill pill-soft">In-depth look</span>
            <div class="d-flex align-items-center gap-2 meta small">
              <span><%= new Date(post.createdAt).toLocaleString() %></span>
              <span class="separator">•</span>
              <span><%= post.readMins || 5 %> min read</span>
            </div>
          </div>
          <% if (post.hasImage) { %>
            <div class="detail-card-thumb">
              <img
                src="<%= post.image %>"
                alt="<%= post.title %>"
                class="img-fluid"
              />
            </div>
          <% } %>
          <div class="rich-text fs-5 lh-lg">
            <% if (Array.isArray(post.paragraphs) && post.paragraphs.length) { %>
              <% post.paragraphs.forEach(function(p, idx) { %>
                <p class="<%= idx === 0 ? 'intro' : '' %>"><%= p %></p>
              <% }) %>
            <% } else { %>
              <p><%= post.content %></p>
            <% } %>
          </div>
        </article>
      </div>
      <div class="col-lg-4">
        <div class="side-card">
          <div class="side-card-header">
            <span class="pill pill-soft mb-2">Article stats</span>
            <h6 class="mb-1 text-white">Quick snapshot</h6>
            <p class="meta small mb-0">What readers should know</p>
          </div>
          <ul class="list-unstyled mb-0 detail-list">
            <li class="d-flex justify-content-between align-items-center">
              <span>Published</span>
              <strong><%= new Date(post.createdAt).toLocaleDateString() %></strong>
            </li>
            <li class="d-flex justify-content-between align-items-center">
              <span>Reading time</span>
              <strong><%= post.readMins || 5 %> mins</strong>
            </li>
            <li class="d-flex justify-content-between align-items-center">
              <span>Engagement</span>
              <strong><%= Array.isArray(post.likedBy) ? post.likedBy.length : (post.likes || 0) %> likes</strong>
            </li>
          </ul>
        </div>

        <div class="side-card">
          <div class="side-card-header d-flex justify-content-between align-items-center">
            <div>
              <span class="pill pill-soft mb-2">Keep exploring</span>
              <h6 class="mb-0 text-white">More from GameVault</h6>
            </div>
            <a href="/blog" class="meta small text-decoration-none">View all</a>
          </div>
          <div class="side-links">
            <a class="side-link" href="/shop/admin">Browse the shop</a>
            <a class="side-link" href="/forum">Join the forum</a>
            <a class="side-link" href="/reviews">Read reviews</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
